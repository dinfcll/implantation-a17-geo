<form #loginForm="ngForm" >

    <input checked id="signin" name="action" type="radio" [value]="signin" [(ngModel)]="option">
    <label for="signin">Connexion</label>

    <input id='signup' name='action' type='radio' value='signup' [(ngModel)]="option">
    <label for='signup'>Inscription</label>

    <input id='reset' name='action' type='radio' value='reset' [(ngModel)]="option">
    <label for='reset'>Réinitialisation</label>

    <div id="wrapper">

        <div id="arrow"></div>

        <input type="text" class="loginFirst" placeholder="Courriel" #userEmail="ngModel" name="email"
            [(ngModel)]="email" required autofocus pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" email="true"
            [ngClass]="{'has-error' : userEmail.touched && !userEmail?.valid,'has-success':userEmail.valid}" >
         
        <input type="password" class="loginInput" placeholder="Mot de passe" #userPW="ngModel" name="mdp"
            [(ngModel)]="mdp" required *ngIf="option !='reset'"
            [ngClass]="{'has-error' : userPW.touched && !userPW?.valid,'has-success':userPW.valid}">
         
        <input type="password" class="loginInput" placeholder="Confirmer Mot de passe" #confirmPW="ngModel" name="confirm"
            [(ngModel)]="confirm" required *ngIf="option=='signup'"
            [ngClass]="{'has-error' : confirmPW.touched && !confirmPW?.valid,'has-success':confirmPW.valid}">

    </div>

    <button type="submit" [ngClass]="{'disabled':!loginForm.form.valid,'fixMargin':option=='reset'}" (click)="loginForm.form.valid && formSubmit(option,email,mdp,confirm)">
        <span (click)="loginForm.form.valid && resetPW(email)">
            Réinitialiser Mot de passe
        </span>
        <span (click)="loginForm.form.valid && onLogin(email,mdp)">
            Se Connecter <loading></loading>
        </span>
        <span (click)="loginForm.form.valid && inscription(email,mdp,confirm)">
            S'inscrire
        </span>
    </button>

</form>
